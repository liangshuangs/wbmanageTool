/**/﻿_jsload&&_jsload('control', 'C.extend(dB.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){a2.prototype.initialize.call(this,e);this._render();this._updateState();this._bind(e);return this._container},_bind:function(i){var e=this;i.addEventListener("load",function(T){e._updateState()});i.addEventListener("moveend",function(T){e._updateState()});i.addEventListener("zoomend",function(T){e._updateState()})},_render:function(){a2.prototype._render.call(this);C.ac(this._container,"BMap_cpyCtrl");var e=this._container.style;e.cursor="default";e.whiteSpace="nowrap";e.MozUserSelect="none";e.WebkitTextSizeAdjust="none";a2.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_updateState:function(){if(!this._map||!this._container||this._copyrightCollection.length===0){return}for(var hI=0,e=this._copyrightCollection.length;hI<e;hI++){var hK;var hM=this._map.getZoom();if(this._copyrightCollection[hI].mapType!==""&&this._map.mapType!==this._copyrightCollection[hI].mapType){hK=false}else{if(hM<this._copyrightCollection[hI].minZoom){hK=false}else{hK=true}}if(hK){if(this._container){var hJ=false;for(var T=0,hL=this._container.children.length;T<hL;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[hI].id){hJ=true;this._container.children[T].style.display="block";if(this._container.children[T].innerHTML!==this._copyrightCollection[hI].content){this._container.children[T].innerHTML=this._copyrightCollection[hI].content}break}}if(!hJ){this._generateHTML(this._copyrightCollection[hI])}}}else{if(this._container){for(var T=0;T<this._container.children.length;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[hI].id&&this._container.children[T].style.display!=="none"){this._container.children[T].style.display="none";return}}}}}},addCopyright:function(hI){if(!hI||typeof hI.id!=="number"||isNaN(hI.id)){return}var e={minZoom:0,bounds:null,content:"",mapType:""};for(var T in hI){e[T]=hI[T]}if(this._map){var hL=e.minZoom;if(hL===-1||hL<this._map.getMinZoom()||hL>this._map.getMaxZoom()){e.minZoom=this._map.getMinZoom()}if(e.mapType!==""&&!b1[e.mapType]){e.mapType=BMAPGL_NORMAL_MAP}}var hJ=this.getCopyright(hI.id);if(hJ){for(var hK in e){hJ[hK]=e[hK]}}else{this._copyrightCollection.push(e)}this._updateState()},getCopyright:function(hI){for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===hI){return this._copyrightCollection[T]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(hK){var hI;for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===hK){hI=this._copyrightCollection.splice(T,1);T--;e=this._copyrightCollection.length}}var hJ=this.getDom(hK);if(hJ&&hJ.parentNode){hJ.parentNode.removeChild(hJ);hJ=null}this._updateState();return hI},_generateHTML:function(e){if(!this._container){return}this._container.innerHTML+=\'<span _cid="\'+e.id+\'">\'+e.content+"</span>"},getDom:function(hJ){var hI=a2.prototype.getDom.call(this);if(typeof hJ==="undefined"){return hI}else{if(hI){for(var T=0,e=hI.children.length;T<e;T++){if(parseInt(hI.children[T].getAttribute("_cid"),10)===hJ){return hI.children[T]}}}}}});function fg(){}C.extend(dm.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map);this.dispatchEvent(new a6("ondomready"))}},initialize:function(e){a2.prototype.initialize.call(this,e);this._firstAnimation=true;this._setParam();this._render();this._bind();this._setSliderZoomLv(e.getZoom());this._bindMapEvent(e);var i=this._opts.offset||(new d1(1,0));this.setOffset(i);this.redraw();return this._container},_bindMapEvent:function(i){var e=this;i.addEventListener("zoomend",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom());if(e._msover){return}if(e._isShowLevelHint){if(e.getType()===BMAP_NAVIGATION_CONTROL_ANIM){e._hideTimerId=setTimeout(function(){e._hideLevelHint(true);e._shrinkSlider()},1000)}else{e._hideTimerId=setTimeout(function(){e._hideLevelHint(true)},1000)}}});i.addEventListener("mousewheel",function(){if(!e._map){return}if(e._map.config.enableWheelZoom&&e._isShowLevelHint){if(e._hideTimerId){clearTimeout(e._hideTimerId);e._hideTimerId=null}if(e.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){e._showLevelHint()}}});i.addEventListener("load",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom())})},redraw:function(){this._setParam();this.setType(this._opts.type);if(this._map){this._setSliderZoomLv(this._map.getZoom())}},_setParam:function(){this._minZoomLevel=this._map.config.zoomLevelMin;this._maxZoomLevel=this._map.config.zoomLevelMax;if(this._minZoomLevel>4||this._maxZoomLevel<18){this._isShowLevelHint=false}else{this._isShowLevelHint=true}this._totalZoomLv=this._maxZoomLevel-this._minZoomLevel+1;this._maxBarY=this._minBarY+(this._totalZoomLv-1)*this._sliderInterval},_render:function(){a2.prototype._render.call(this);var T=C.Browser.ie==6?" BMap_ie6":"";var i=" BMap_stdMpType"+this._opts.type;var hI=this._container;C.ac(hI,"BMap_stdMpCtrl");C.ac(hI,T);C.ac(hI,i);hI.innerHTML=this._generateHtml(this._opts.type);this._setSliderBarCursor(C.Browser.opera?"pointer":eV.defaultCursor);this._panBtnContainer=C.G(hI.children[0]);this._zoomDom=C.G(hI.children[1]);var e=this._zoomDom;this._btnZoomIn=C.G(e.children[0]);this._btnZoomOut=C.G(e.children[1]);this._sliderDom=C.G(e.children[2]);this._sliderBaseDom=C.G(e.children[2].children[0]);this._sliderBotDom=C.G(e.children[2].children[1]);this.setType(this._opts.type)},_setSliderHeight:function(){var i=this._opts.type;var hI=this.controlHeight[i].width;var hJ=this.controlHeight[i].height;var hK=this.controlHeight[i].zoomHeight;var e=this.controlHeight[i].zoomWidth;var hL=this.controlHeight[i].sliderHeight;if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){}this._container.style.width=hI+"px";this._container.style.height=hJ+"px";this._zoomDom.style.height=hK+"px";this._zoomDom.style.width=hI+"px";if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM){this._btnZoomOut.style.top=24+"px"}else{var T=(this._opts.forceNew===true)?29:23;this._btnZoomOut.style.top=hK-T+"px"}this._sliderDom.style.height=hL+"px";this._sliderBaseDom.style.height=hL+"px";if(this._opts.type==BMAP_NAVIGATION_CONTROL_ZOOM){this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left="0"}else{this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left=""}},_generateHtml:function(){var e=[];e.push(this._generatePanHtml());e.push(this._generateZoomContainerHtml());return e.join("")},_generatePanHtml:function(){var e=\'<div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div>\';return e},_generateZoomContainerHtml:function(){var e=\'<div class="BMap_stdMpZoom">\'+this._generateZoomHtml()+this._generateSliderHtml()+this._generateZoomBalloonHtml()+"</div>";return e},_generateZoomHtml:function(){var e="BMap_button";(this._opts.forceNew===true)&&(e="BMap_button_new");var i=\'<div class="\'+e+\' BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="\'+e+\' BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return i},_generateSliderHtml:function(){var e=\'<div class="BMap_stdMpSlider"><div class="BMap_stdMpSliderBgTop"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放"><div class="BMap_smcbg"></div></div></div>\';return e},_generateZoomBalloonHtml:function(){var e=\'<div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div>\';return e},setType:function(e){if(typeof e=="number"&&e>=BMAP_NAVIGATION_CONTROL_LARGE&&e<=BMAP_NAVIGATION_CONTROL_ANIM){this._opts.type=e}else{this._opts.type=BMAP_NAVIGATION_CONTROL_LARGE}if(!this._map||!this._container){return}var i=this._container;i.className=i.className.replace(/BMap_stdMpType\\d/,"BMap_stdMpType"+this._opts.type);this._setSliderHeight();if(e!=BMAP_NAVIGATION_CONTROL_LARGE&&e!=BMAP_NAVIGATION_CONTROL_ANIM){C.rc(i.children[1].children[2],"hvr")}this.setAnchor(this._opts.anchor)},getType:function(){return this._opts.type},_bind:function(){var hS=this;var hR=hS._container;var hK=this._opts.from=="MAP_INDEX";function hJ(i,hU){return i.contains?i!=hU&&i.contains(hU):!!(i.compareDocumentPosition(hU)&16)}function hN(hW,hV){var hU,i=hW.type.toLowerCase();if(i=="mouseover"){hU=hW.relatedTarget||hW.fromElement}else{if(i==="mouseout"){hU=hW.relatedTarget||hW.toElement}else{return true}}return hU&&hU.prefix!="xul"&&!hJ(hV,hU)&&hU!==hV}C.on(hR,"mouseover",function(i){i=i||window.event;if(hN(i,hR)){hS.dispatchEvent(new a6("onmouseover"))}});C.on(hR,"mouseout",function(i){i=i||window.event;if(hN(i,hR)){hS.dispatchEvent(new a6("onmouseout"))}});function hI(){if(!hS._isShowLevelHint){return}hS._msover=true;if(hS._hideTimerId){clearTimeout(hS._hideTimerId);hS._hideTimerId=null}hS._expandSlider();if(hS.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){hS._showLevelHint()}}function hM(){if(!hS._isShowLevelHint){return}if(hS._hideTimerId){clearTimeout(hS._hideTimerId)}hS._msover=false;hS._hideTimerId=setTimeout(function(){hS._hideLevelHint();hS._hideTimerId=null;hS._shrinkSlider()},1000)}if("onmouseenter" in document.documentElement){C.on(this._zoomDom,"mouseenter",function(i){hI()});C.on(this._zoomDom,"mouseleave",function(hU){var i=hU.relatedTarget;if(i&&(i===this||hJ(this,i))){return}hM()})}else{C.on(this._zoomDom,"mouseover",function(hU){var i=hU.relatedTarget;if(i&&(i===this||hJ(this,i))){return}hI()});C.on(this._zoomDom,"mouseout",function(hU){var i=hU.relatedTarget;if(i&&(i===this||hJ(this,i))){return}hM()})}C.on(hR.children[0],"mouseover",function(){hS._hideLevelHint(true)});C.on(hR.children[0].children[0],"click",function(){hS._panBy(0,Math.round(hS._map.height/3));hK?fg(6004):null});C.on(hR.children[0].children[1],"click",function(){hS._panBy(Math.round(hS._map.width/3),0);hK?fg(6004):null});C.on(hR.children[0].children[2],"click",function(){hS._panBy(-Math.round(hS._map.width/3),0);hK?fg(6004):null});C.on(hR.children[0].children[3],"click",function(){hS._panBy(0,-Math.round(hS._map.height/3));hK?fg(6004):null});C.on(hR.children[0].children[0],"mouseover",function(){hS._panBtnContainer.style.backgroundPosition="0 -44px"});C.on(hR.children[0].children[1],"mouseover",function(){hS._panBtnContainer.style.backgroundPosition="0 -176px"});C.on(hR.children[0].children[2],"mouseover",function(){hS._panBtnContainer.style.backgroundPosition="0 -88px"});C.on(hR.children[0].children[3],"mouseover",function(){hS._panBtnContainer.style.backgroundPosition="0 -132px"});C.on(hS._panBtnContainer,"mouseout",function(){hS._panBtnContainer.style.backgroundPosition="0 0"});var hQ=hR.children[1].children;C.on(hQ[0],"click",function(){var i=hS._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomIn({from:"control"});i._earth.fire(new a6("onzoominclick"))}}else{hK?fg(6005):null;if(i.config.isModernBrowser){hS._deepZoomIn()}else{hS._zoomIn()}i.fire(new a6("onzoominclick"))}});C.on(hQ[1],"click",function(){var i=hS._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomOut({from:"control"});i._earth.fire(new a6("onzoomoutclick"))}}else{hK?fg(6005):null;if(i.config.isModernBrowser){hS._deepZoomOut()}else{hS._zoomOut()}i.fire(new a6("onzoomoutclick"))}});for(var hL=1;hL<6;hL++){C.on(hR.children[0].children[hL],"mouseup",function(i){if(hS._map.currentOperation!==dO.dragging&&hS._map.currentOperation!==dO.stdMapCtrlDrag){h(i)}});C.on(hR.children[0].children[hL],"contextmenu",function(i){bP(i)});C.on(hR.children[0].children[hL],"click",function(i){bP(i)})}C.on(hQ[0],"mouseup",function(i){if(hS._map.currentOperation!==dO.dragging&&hS._map.currentOperation!==dO.stdMapCtrlDrag){h(i)}});C.on(hQ[1],"mouseup",function(i){if(hS._map.currentOperation!==dO.dragging&&hS._map.currentOperation!==dO.stdMapCtrlDrag){h(i)}});C.on(hQ[0],"contextmenu",function(i){bP(i)});C.on(hQ[1],"contextmenu",function(i){bP(i)});var hT=hR.children[1].children[2].children[2];C.on(hT,"mouseup",function(i){if(hS._map.currentOperation!==dO.dragging&&hS._map.currentOperation!==dO.stdMapCtrlDrag){h(i)}});C.on(hQ[0],"click",function(i){h(i)});C.on(hQ[1],"click",function(i){h(i)});C.on(hT,"click",function(i){h(i)});var hP=hR.children[1].children[2].children[3];C.on(hP,"mouseup",function(i){if(i.button==2){h(i)}});C.on(hP,"contextmenu",function(i){bP(i)});C.on(this._zoomDom.children[3].children[0],"click",function(i){hS._map.zoomTo(18)});C.on(this._zoomDom.children[3].children[1],"click",function(i){hS._map.zoomTo(12)});C.on(this._zoomDom.children[3].children[2],"click",function(i){hS._map.zoomTo(8)});C.on(this._zoomDom.children[3].children[3],"click",function(i){hS._map.zoomTo(4)});C.on(hT,"mousedown",function(hU){hU=window.event||hU;var i=hU.offsetY||hU.layerY||0;var hV=0;hV=(hS._maxZoomLevel+1)-Math.round(hS._totalZoomLv*parseFloat(i/(hS._totalZoomLv*hS._sliderInterval)));hS._map.zoomTo(hV);hK?fg(6006):null});C.on(hP,"mouseover",function(){C.ac(hP,"h")});C.on(hP,"mouseout",function(){if(hS._map.currentOperation!==dO.stdMapCtrlDrag){C.rc(hP,"h")}});var hO=function(i){var i=window.event||i;if(i.button==2){return}if((C.Browser.ie&&i.button!=1)){return}if(hP.setCapture){hP.setCapture()}hS._map.currentOperation=dO.stdMapCtrlDrag;hS._bind.my=i.pageY||i.clientY||0;if(!C.Browser.opera){hS._setSliderBarCursor(eV.draggingCursor)}C.on(document,"mousemove",e);C.on(document,"mouseup",T);h(i);return bP(i)};var e=function(hU){if(hS._map.currentOperation===dO.stdMapCtrlDrag){var hU=window.event||hU;var hV=hU.pageY||hU.clientY;var i=hS._curBarY-hV+hS._bind.my;if(i<hS._minBarY){i=hS._minBarY}else{if(i>hS._maxBarY){i=hS._maxBarY}}hP.style.top=(hS._sliderHeight-i-15)+"px";hS._sliderBotDom.style.height=i+"px"}};var T=function(hU){if(hS._map.currentOperation===dO.stdMapCtrlDrag){var i=C.G(hP);hS._curBarY=parseInt(i.style.top);C.rc(hP,"h");hS._map.currentOperation=dO.idle;if(hR&&hP&&hP.releaseCapture){hP.releaseCapture()}if(!C.Browser.opera){hS._setSliderBarCursor(eV.defaultCursor)}var hV=(hS._maxZoomLevel+1)-Math.round(parseFloat(hS._curBarY-hS._minBarY)/parseFloat(hS._maxBarY-hS._minBarY)*(hS._totalZoomLv-1)+1);hS._map.zoomTo(hV);hK?fg(6006):null;C.un(document,"mousemove",e);C.un(document,"mouseup",T)}};C.on(hP,"mousedown",hO)},_setSliderBarCursor:function(e){this._container.children[1].children[2].children[3].style.cursor=e},_panBy:function(i,e){this._map.panBy(i,e)},_zoomIn:function(){this._map.zoomIn()},_zoomOut:function(){this._map.zoomOut()},_deepZoomOut:function(){this._map.deepZoomMedia(-1)},_deepZoomIn:function(){this._map.deepZoomMedia(1)},_setSliderZoomLv:function(i){if(!this._container||(this.getType()!=BMAP_NAVIGATION_CONTROL_LARGE&&this.getType()!=BMAP_NAVIGATION_CONTROL_ANIM)){return}var e=(i-this._minZoomLevel)*this._sliderInterval+this._minBarY;this._curBarY=e>this._maxBarY?this._maxBarY:e<this._minBarY?this._minBarY:e;this._container.children[1].children[2].children[3].style.top=(this._sliderHeight-this._curBarY-15)+"px";this._sliderBotDom.style.height=this._curBarY+"px"},_hideLevelHint:function(e){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){C.rc(this._container.children[1].children[3],"hvr")}}if(e&&this._hideTimerId){clearTimeout(this._hideTimerId);this._hideTimerId=null}},_showLevelHint:function(){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){C.ac(this._container.children[1].children[3],"hvr")}}},_expandSlider:function(){},_shrinkSlider:function(){},show:function(){a2.prototype.show.call(this);if(C.Browser.ie<8){var e=this;setTimeout(function(){e.setType(e._opts.type)},1)}}});C.extend(g8.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){a2.prototype.initialize.call(this,e);this._render(e);this._setParam();this._updateScale();this._bind(e);return this._container},_setParam:function(){this._numberArray={us:[5280*5000,5280*2500,5280*2000,5280*1000,5280*500,5280*200,5280*100,5280*50,5280*25,5280*20,5280*10,5280*5,5280*2,5280,2000,1000,500,200,100,50,20,10,5],metric:[10000000,5000000,2000000,1000000,500000,200000,100000,50000,25000,20000,10000,5000,2000,1000,500,200,100,50,20,10,5,2,1]}},_bind:function(i){var e=this;i.addEventListener("zoomend",function(T){e._updateScale()});i.addEventListener("load",function(T){e._updateScale()});i.addEventListener("moveend",function(T){e._updateScale()})},_render:function(e){a2.prototype._render.call(this,e);C.ac(this._container,"BMap_scaleCtrl");this._container.innerHTML=this._generateHTML();this._container.style.WebkitTextSizeAdjust="none";this._scaleText=this._container.children[0];a2.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_generateHTML:function(){var e=\'<div class="BMap_scaleTxt" style="white-space:nowrap;overflow:visible;text-align:center"></div><div class="BMap_scaleBarBG BMap_scaleHBarBG"></div><div class="BMap_scaleBarBG BMap_scaleRBarBG"></div><div class="BMap_scaleBarBG BMap_scaleLBarBG"></div><div class="BMap_scaleBar BMap_scaleHBar"></div><div class="BMap_scaleBar BMap_scaleLBar"></div><div class="BMap_scaleBar BMap_scaleRBar"></div>\';return e},setUnit:function(e){this._opts.unit=this._units[e]&&this._units[e].name||this._opts.unit;if(!this._map){return}this._updateScale()},_setScaleText:function(i,e){this._scaleText.innerHTML=i+"&nbsp;"+e},_updateScale:function(){if(!this._map||!this._container||!this._map.isLoaded()){return}var T=this._map;var hP=new eb(Math.round(T.width/2-50),Math.round(T.height/2));var hL=new eb(Math.round(T.width/2+50),Math.round(T.height/2));var hI=T.pixelToPointIn(hP,{heading:0});var hO=T.pixelToPointIn(hL,{heading:0});var hK=ef.getDistanceByMC(hI,hO)/100;if(hK===0||isNaN(hK)){return}var i=this._convertUnit(hK,this._opts.unit);var e=0;var hJ=this._units[this._opts.unit].incon;var hN=Math.round(this._map.getZoom());var hM=this._numberArray[this._opts.unit][hN-1];e=hM/i;if(fW()&&e>100){hM=this._numberArray[this._opts.unit][hN];e=hM/i}if(e>300){return}var hQ=hM>=hJ?this._units[this._opts.unit].u2:this._units[this._opts.unit].u1;if(hM>=hJ){hM=Math.round(hM/hJ)}this._setScaleText(hM,hQ);this._container.style.width=Math.round(e)+"px"},_convertUnit:function(e,i){i=i||"metric";if(this._units[i]){return e*this._units[i].conv}return e}});var fl=new String(eV.imgPath+"maptype.png?20150903");fl.toCss=function(e,T){e=typeof e==="number"?e+"px ":"";T=typeof T==="number"?T+"px ":"";var i="transparent url("+this+") no-repeat "+e+T;return i};var bI=[[0,-138],[-11,-138]];bI.toCss=function(i){var e=this[Number(i)];return e[0]+"px "+e[1]+"px"};var aJ={B_EARTH_MAP:{text:"3D地球",title:"显示3D地球",file:fl,x:0,y:-92,right:0},B_NORMAL_MAP:{text:"地图",title:"显示普通地图",file:fl,x:0,y:0,right:0}};var gA={B_NORMAL_MAP:{first:"B_EARTH_MAP",second:"B_NORMAL_MAP",showMenu:true},B_EARTH_MAP:{first:"B_NORMAL_MAP",second:"B_EARTH_MAP",showMenu:false}};var b2=["B_NORMAL_MAP","B_EARTH_MAP"];var aT={HIGHLIGHT:"#0c88e8",NORMAL:"#ffffff",HIGHLIGHT_TEXT:"#ffffff",NORMAL_TEXT:"#666666"};C.extend(bx.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(hX){a2.prototype.initialize.call(this,hX);a2.prototype._render.call(this);a2.prototype._setPosition.call(this);this.mapTypeButtons={};var hK=aT;var hI={top:"0px",cursor:"pointer",width:"49px",height:"46px",zIndex:"800",display:"inline-block",position:"absolute",fontSize:"12px",backgroundColor:"#fff"};var T={width:"49px",height:"46px",position:"absolute"};var hY={position:"absolute",top:"28px",left:"2px",width:"45px",height:"16px",backgroundColor:hK.NORMAL,opacity:"0.8",filter:"Alpha(opacity=80);"};var hP={position:"absolute",top:"30px",left:"2px",width:"45px",color:"#666666",textAlign:"center",lineHeight:"12px"};if(C.isIE>0&&C.isIE<=8){hP.lineHeight="15px"}C.extend(this._container.style,{top:"10px",width:"49px",height:"98px"});this._container.style.background="url("+eV.imgPath+"blank.gif)";this._container.style.WebkitTransition=this._container.style.transition="top .3s ease-out";var e=S("div");this._menu=e;C.extend(e.style,{position:"absolute",width:"71px",height:"24px",border:"1px solid #ABAEB3",fontSize:"12px",bottom:"20px",right:"0",backgroundColor:"white",display:"none",cursor:"pointer"});var hN=S("span");hN._checked=this._map.isStreetLayerShow();var hL=bI[1];e._checkbox=hN;C.extend(hN.style,{background:fl.toCss(hL[0],hL[1]),width:"11px",height:"11px",position:"absolute",cssFloat:"left",top:"7px",left:"4px"});e.appendChild(hN);var hO=S("span");hO.innerHTML="显示路网";C.extend(hO.style,{position:"absolute",top:"5px",marginLeft:"18px"});e.appendChild(hO);hO.onmouseover=h;hO.onmouseout=h;e.onmouseover=h;e.onmouseout=h;this._container.appendChild(e);for(var hR=0,hT=b2.length;hR<hT;++hR){var hZ=b2[hR];var hJ=aJ[hZ];var hS=S("div");hS.title=hJ.title;hS._name=hZ;C.extend(hS.style,hJ);C.extend(hS.style,hI);var hQ=S("div");hQ.style.position="absolute";hQ.style.width="49px";hQ.style.height="46px";hQ.style.left=hQ.style.top="0";hQ.style.zIndex="999";hS._mask=hQ;hS.appendChild(hQ);var hM=S("span");hS._captionBg=hM;C.extend(hM.style,hY);hM.onmouseover=h;hM.onmouseout=h;var hV=S("span");hS._innerBox=hV;C.extend(hV.style,T);var hW=fl.toCss(hJ.x,hJ.y);hV.style.background=hW;var hU=S("span");hS._caption=hU;hU.innerHTML=hJ.text;C.extend(hU.style,hP);hS.appendChild(hV);hV.appendChild(hM);hV.appendChild(hU);hU.onmouseover=h;this._container.appendChild(hS);this.mapTypeButtons[hZ]=hS}this._bind(hX);this.updateUI(this._map.mapType);return this._container},_bind:function(i){var e=this;this._container.ondblclick=h;this.mapTypeButtons.B_NORMAL_MAP._mask.onclick=function(){e._map.setMapType("B_NORMAL_MAP")};this.mapTypeButtons.B_EARTH_MAP._mask.onclick=function(){e._map.setMapType("B_EARTH_MAP")};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_NORMAL_MAP)};this.mapTypeButtons.B_EARTH_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_EARTH_MAP)};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseout=this.mapTypeButtons.B_EARTH_MAP._mask.onmouseout=function(){e._dehighlightAll()};this._menu.onclick=function(T){e._map.showStreetLayer(!e._menu._checkbox._checked);h(T);return false};this._menu.ondblclick=h;i.addEventListener("onmaptypechange",function(T){e.updateUI(this.mapType)});i.addEventListener("onstreetlayer_show",function(T){e._menu._checkbox._checked=true;e._menu._checkbox.style.backgroundPosition=bI.toCss(true)});i.addEventListener("onstreetlayer_hide",function(T){e._menu._checkbox._checked=false;e._menu._checkbox.style.backgroundPosition=bI.toCss(false)});i.addEventListener("forceenableearth",function(T){if(this.config.enableEarth){e.showButton("B_EARTH_MAP");e.hideButton("B_NORMAL_MAP")}})},updateUI:function(T){this.hideButton(T);var hK=gA[T];var hI=this.mapTypeButtons[hK.first];hI.style.top="0";hI.style.display="inline-block";this.showButton(hK.first);var e=this.mapTypeButtons[hK.second];e.style.display="none";this.showButton(hK.second);if(T!=="B_NORMAL_MAP"){var i=this._map.isStreetLayerShow();var hJ=this._menu;hJ._checkbox._checked=i;hJ._checkbox.style.backgroundPosition=bI.toCss(i);hJ.style.display=""}else{this._menu.style.display="none"}if(!this._map.config.enableEarth){this.hideButton("B_EARTH_MAP")}},remove:function(){var hI=this.mapTypeButtons;for(var T=0,e=hI.length;T<e;++T){hI[T]=null}a2.prototype.remove.call(this)},hideButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="hidden"}},showButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="visible"}},isButtonVisible:function(i){var e=this.mapTypeButtons[i];if(!e){return}return e.style.visibility==="visible"},_highlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=aT.HIGHLIGHT;e._captionBg.style.opacity="1";e._captionBg.style.filter="";e._caption.style.color=aT.HIGHLIGHT_TEXT},_dehighlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=aT.NORMAL;e._captionBg.style.opacity="0.8";e._captionBg.style.filter="Alpha(opacity=80);";e._caption.style.color=aT.NORMAL_TEXT},_dehighlightAll:function(){this._dehighlight(this.mapTypeButtons.B_NORMAL_MAP);this._dehighlight(this.mapTypeButtons.B_EARTH_MAP);this._dehighlight(this.mapTypeButtons.B_SATELLITE_MAP)}});C.extend(cs.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(i){this._map=i;var hI=this._container=document.createElement("div");hI.style.cssText="box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:rgba(255,255,255,1);";hI.className="BMap_stdMpZoom";var e=this._zoomIn=document.createElement("div");e.className="BMap_button_new BMap_stdMpZoomIn";e.innerHTML=\'<div class="BMap_smcbg in" style="position: absolute"></div>\';var T=this._zoomOut=document.createElement("div");T.className="BMap_button_new BMap_stdMpZoomOut";T.innerHTML=\'<div class="BMap_smcbg out" style="position: absolute; top: 36px;"></div>\';hI.appendChild(e);hI.appendChild(T);i.getContainer().appendChild(hI);this.bindEvt();return hI},_generateZoomHtml:function(){var e=\'<div class="BMap_button_new BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="BMap_button_new BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return e},bindEvt:function(){var e=this;var i=e._map;e._zoomIn.onclick=function(){i.zoomIn();e._zoomInTapped=false;this.style.background=""};e._zoomOut.onclick=function(){i.zoomOut();e._zoomOutTapped=false;this.style.background=""};e._zoomIn.ontouchstart=function(T){if(e._zoomInDisabled){return}e._zoomInTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomIn.ontouchend=function(){if(!e._zoomInTapped){return}i.zoomIn();e.updateUI();e._zoomInTapped=false;this.style.background=""};e._zoomOut.ontouchstart=function(T){if(e._zoomOutDisabled){return}e._zoomOutTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomOut.ontouchend=function(){if(!e._zoomOutTapped){return}i.zoomOut();e.updateUI();e._zoomOutTapped=false;this.style.background=""};e.zoomChangeHandler=function(){};i.addEventListener("zoomend",e.zoomChangeHandler);i.addEventListener("load",e.zoomChangeHandler)},updateUI:function(){var e=this._map;if(e.getZoom()>=e.getMaxZoom()){this._zoomInDisabled=true}else{this._zoomInDisabled=false;this._zoomIn.childNodes[0].style.backgroundPosition="0px 0px"}if(e.getZoom()<=e.getMinZoom()){this._zoomOutDisabled=true}else{this._zoomOutDisabled=false;this._zoomOut.childNodes[0].style.backgroundPosition="-8px 0"}}});C.extend(bv.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}if(this._startLocationCalled){this.startLocation();this._startLocationCalled=false}},initialize:function(e){a2.prototype.initialize.call(this,e);this._render(e);this._bind(e);return this._container},startLocation:function(){var T=this;var e=true;if(T.onLocationStart){function hI(hK){T._onLocSuccess(hK,true)}function hJ(){T._onLocFailure()}e=T.onLocationStart(hI,hJ)}if(e===false){return}if(!navigator.geolocation){return}var i={enableHighAccuracy:false,maximumAge:1000,timeout:30000};this.watchId&&navigator.geolocation.clearWatch(this.watchId);this.watchId=null;navigator.geolocation.getCurrentPosition(function(hK){T._onLocSuccess(hK,true)},function(hK){T._onLocFailure(hK)},i);if(this.watchPosition){this.watchId=navigator.geolocation.watchPosition(function(hK){T._onLocSuccess(hK,false)},function(hK){},i)}},stopLocationTrace:function(){if(navigator.geolocation){this.watchId&&navigator.geolocation.clearWatch(this.watchId)}},_render:function(T){var i=this._container=document.createElement("div");i.style.cssText="width:39px;height:39px;box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:#fff;cursor:pointer;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;border-radius: 4px;";var hI=this._locBtn=document.createElement("div");hI.style.cssText=\'position: absolute;left: 50%;top: 50%;margin-left: -10px;margin-top: -10px;width: 20px;height: 20px;background: url("\'+eV.imgResources.locNewPng+\'") 0 0;background-size: 48px 116px;\';i.appendChild(hI);var e=this._locFailTip=document.createElement("div");e.innerHTML="定位失败";e.style.cssText="display:none;position:absolute;left:45px;top:50%;width: 52px;height:20px;line-height:20px;margin-top:-10px;font-size:12px;box-shadow:1px 1px 2px rgba(0,0,0,.4);background:rgba(255,255,255,1);border-radius:3px;padding-left:5px;";i.appendChild(e);T.getContainer().appendChild(i);return i},_bind:function(){var e=this;function T(){e._buttonTapped=true;this.style.background="#9b9b9b"}function i(){if(e._buttonTapped===false){return}e._buttonTapped=false;e.startLocation();this.style.background="#fff"}if(!fW()){e._container.addEventListener("mousedown",T,false);e._container.addEventListener("mouseup",i,false)}else{e._container.addEventListener("touchstart",T,false);e._container.addEventListener("touchend",i,false)}},_onLocSuccess:function(hL,hO){var hK=this;var hM=hL.coords.longitude;var hJ=hL.coords.latitude;if(hL.coordsType==="bd09mc"){var i=new hj(hM,hJ);if(!hK.locMarker){hK._addLocOverlay(i)}else{hK._refreshLocOverlayPosition(i,hO)}return}var hN=1;if(hL.coordsType==="bd09ll"){hN=5}var T=hM+","+hJ;var hI="locCbk"+Math.floor(Math.random()*10000000000);bj[hI]=function(hQ){if(hQ&&hQ.result&&hQ.result.length>0){var hP=hQ.result[0];var hR=new hj(hP.x,hP.y);if(!hK.locMarker){hK._addLocOverlay(hR)}else{hK._refreshLocOverlayPosition(hR,hO)}}delete bj[hI]};var e="https://api.map.baidu.com/geoconv/v1/?coords="+T+"&from="+hN+"&to=6&ak=1biSUTC4Lo4hgpK3GQoytX3t&callback="+es+"."+hI;hd.load(e)},_onLocFailure:function(){var e=this._locFailTip;e.style.display="block";setTimeout(function(){e.style.display="none"},1000)},_addLocOverlay:function(i){var T=this._map;var e=new g2(eV.imgResources.locNewPng,new d1(48,48),{imageSize:new d1(48,116),imageOffset:new d1(0,20)});var hI=this.locMarker=new dk(i,{icon:e,baseZIndex:999999,enableMassClear:false,clickable:false});T.addOverlay(hI);if(this._opts.autoViewport){if(this._opts.autoZoom){T.centerAndZoomIn(i,this.locLevel)}else{T.setCenterIn(i)}}if(this.useCompass&&this._isSupportCompass()){this.switchToCompassState()}},_refreshLocOverlayPosition:function(i,e){this.locMarker.setPositionIn(i);if(this.headingMarker){this.headingMarker.setPositionIn(i)}if(e&&this._opts.autoViewport){if(this._opts.autoZoom){this._map.centerAndZoomIn(i,this.locLevel)}else{this._map.setCenterIn(i)}}},_isSupportCompass:function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("android")>-1||!window.DeviceOrientationEvent||(e.indexOf("ucweb")>-1&&e.indexOf("linux")>-1)){return false}return true},switchToCompassState:function(){var T=this;var i=new g2(eV.imgResources.locNewPng,new d1(48,48),{imageSize:new d1(48,116),imageOffset:new d1(0,68),anchor:new d1(24,24)});this.headingMarker=new dk(this.locMarker.getPositionIn(),{icon:i,baseZIndex:999998,enableMassClear:false,clickable:false});this._map.addOverlay(this.headingMarker);var e=0;var hI=window.orientation;window.addEventListener("deviceorientation",function(hL){var hK;if(!hL.webkitCompassHeading){hK=Math.round(hL.alpha)}else{hK=Math.round(0-hL.webkitCompassHeading)}hK=hK-hI;var hJ=Math.abs(e-hK);if(hJ>1){T.headingMarker.setRotation(0-hK);e=hK}},true);window.addEventListener("orientationchange",function(){hI=window.orientation},true)}});');
