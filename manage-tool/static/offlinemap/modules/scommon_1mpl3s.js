/**/﻿_jsload&&_jsload('scommon', 'var dJ=1,dK=2,fk=3,ew=new d1(21,33),bH=new d1(10,33),aS=new d1(22,36),gD=new d1(11,36),p=new d1(25,40),k=new d1(12,20),eO=new d1(9,0),gK=new d1(300,300);cZ.addSearchPoi=function(i,hN,hL,hM){var hO=av(hN);if(!hO){return}if(hL<0||hL>9){return}var hJ=null;var hK=new ay(hO);var e=eV.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a1()>1){function hI(){return new g2(e,ew,{imageSize:gK,anchor:bH,imageOffset:new d1(21*hL,0),infoWindowOffset:eO})}hJ=hI();var T=hI();T.setImageOffset(new d1(21*hL,66));hK.icoDefault=hJ;hK.icoActive=T}else{hJ=new g2(e,ew,{imageSize:gK,anchor:bH,imageOffset:new d1(21*hL,0),infoWindowOffset:eO})}hK.setIcon(hJ);i.addOverlay(hK);if(hM){hK.setTitle(hM)}return hK};cZ.addCenterPoi=function(hJ,e,hK){var hI=av(e);if(!hI){return}var i=new ay(hI);var hL=null;if(fW()){function T(){return new g2(eV.imgPath+"markers_hd.png",new d1(21,31),{anchor:bH,imageOffset:new d1(-29,-320),imageSize:new d1(85,477),infoWindowAnchor:eO})}hL=T();i.icoDefault=hL}else{hL=new g2(eV.imgPath+"markers.png",ew,{anchor:bH,imageOffset:new d1(0,-250),infoWindowAnchor:eO})}i.setIcon(hL);hJ.addOverlay(i);if(hK){i.setTitle(hK)}return i};cZ.addSearchInBoundsPoi=function(i,hM,hL){var hN=av(hM);if(!hN){return}var hK=new ay(hN);var hJ=null;var e=eV.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a1()>1){function hI(){return new g2(e,aS,{imageSize:gK,anchor:gD,imageOffset:new d1(200,188),infoWindowOffset:eO})}hJ=hI();var T=hI();T.setImageOffset(new d1(200,224));hK.icoDefault=hJ;hK.icoActive=T}else{hJ=new g2(e,aS,{imageSize:gK,anchor:gD,imageOffset:new d1(200,188),infoWindowOffset:eO})}hK.setIcon(hJ);i.addOverlay(hK);if(hL){hK.setTitle(hL)}return hK};function av(e){var T=[];var i=null;if(e instanceof hj||e instanceof cX){i=e}else{if(typeof e=="string"){T=C.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(C.trim(T[0]));T[1]=parseFloat(C.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new hj(T[0],T[1])}return i}cZ.createSearchInfoWnd=function(T,e){var hR=T.title;var hP=T.addr;var hK=T.tel;var hN=T.uid||"";var i=T.url;var hQ=T.detailUrl;var hO=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!hR){return null}var hM=hR;if(hO==BMAP_POI_TYPE_BUSSTOP){hM=hM+"-公交车站"}else{if(hO==BMAP_POI_TYPE_SUBSTOP){hM=hM+"-地铁站"}}var hL=13;if(hQ){hL=10}if(hM.replace(/[\\u0100-\\uffff]/g,"##").length>hL*2+1){hM=hM.substring(0,hL)+"&#8230"}var hJ=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+eV.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+hR+\'">\'+hM;if(hQ){hJ+=\'<a target="_blank" href="\'+hQ+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}hJ+="</p>";var hT=[];hT.push(\'<div style="font: 12px \'+eV.fontFamily+\'; margin: 5px">\');if(hP){var hS="地址：";if(hO==BMAP_POI_TYPE_BUSSTOP||hO==BMAP_POI_TYPE_SUBSTOP){hS="车次："}hT.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+eV.fontFamily+\'" >\');hT.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+hS+"&nbsp;</td><td>");hT.push(hP+"&nbsp;</td></tr>");if(hK){hT.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+hK+"</td></tr>")}hT.push("</table>")}else{if(hK){hT.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+eV.fontFamily+\'">\');hT.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+hK+"</td></tr></table>")}}hT.push("</div>");var hI=new am(hT.join(""),{title:hJ,height:0,width:250,margin:[10,10,20,10]});return hI};cZ.addDestPoi=function(hL,e,hM,T){var hI=eV.staticHost+"/wolfman/static/common/images/";hI+="markers_new2x_2960fb4.png";var hK=av(e);if(!hK){return}var hJ=new g2(hI,p,{imageSize:gK,anchor:k,imageOffset:new d1(200+T*25,139),infoWindowOffset:eO});var i=new ay(hK,{icon:hJ,baseZIndex:3500000,draggingCursor:"pointer"});hL.addOverlay(i);if(hM){i.setTitle(hM)}return i};cZ.addLine=function(i,e){return cZ.addRoute(i,e,fO)};cZ.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];cZ.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];cZ.addRouteWithTraffic=function(hK,hI,hL){var T=cZ.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof hL=="undefined"){hL=0}if(!T[hL]){return}var e=hI;var i=T[hL];var hJ=new aj(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hK.addOverlay(hJ);hJ._trafficStatus=hL;return hJ};cZ.addRoute=function(hM,hJ,hI){var T=cZ.ROUTE_STYLE_CONFIG;if(typeof hI=="undefined"){hI=0}if(!T[hI]){return}var e=hJ;var i=T[hI];var hL=new aj(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hM.addOverlay(hL);hL._routeType=hI;if(hI==fO){var hK=new aj(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});hL._p=hK;hM.addOverlay(hK)}return hL};cZ.createTransInfoWnd=function(i){var hK=i.content;var e=i.curIndex;var hL=i.total;var hI=i.nextTransCbk;var hJ=i.obj;var hM=i.hideStep;var hN=[\'<div style="font: 12px \'+eV.fontFamily+\'">\'];if(hK){hN.push(\'<div style="margin: 10px 1em 24px 0">\'+hK+"</div>")}if(!hM){hN.push(cZ.genStepNavHtml(hL,e))}hN.push("</div>");var T=new am(hN.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(hM){return T}T.addEventListener("open",function(){var hO=fW()?"touchend":"click";if(C.G("trans_prev")){C.on(C.G("trans_prev"),hO,function(){if(hI&&typeof hI=="function"){hI(e-1,hJ)}})}if(C.G("trans_next")){C.on(C.G("trans_next"),hO,function(){if(hI&&typeof hI=="function"){hI(e+1,hJ)}})}});return T};cZ.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+eV.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};cZ.addTransPoi=function(i,hM,hK,hL){var hN=av(hM);if(!hN){return}hK=hK||BMAP_LINE_TYPE_BUS;var e=eV.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(hK){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var hJ=new g2(e,new d1(22,22),{imageSize:new d1(22,181),infoWindowAnchor:new d1(10,0),imageOffset:new d1(0,T)});var hI=new ay(hN,{icon:hJ});i.addOverlay(hI);if(hL){hI.setTitle(hL)}return hI};cZ.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};cZ.addStationPoi=function(T,e,hI){var i=new ay(e,{icon:new g2(dW._stopUrl,new d1(11,11))});if(hI){i.setTitle(hI)}T.addOverlay(i);return i};cZ.createTipLbl=function(i){var e=new aI(i,{offset:new d1(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};cZ.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};cZ.addSearchPoi_R=function(hO,hM,hP,e,i){var hR=av(hO),e=e||{};e.type=e.type||"normal";if(!hR||typeof(hM)=="undefined"||hM<0||(hM>9&&e.type!=="child")||(hM>39&&e.type==="child")){return}var hQ;var hN=eV.staticHost+"/wolfman/static/common/images/";hN+="markers_new2x_2960fb4.png";var hI=0;if(e.type=="RouteAddrMarker"){hI=273}var T=new d1(18*hM,hI);var hL=new g2(hN,new d1(18,27),{offset:new d1(9,27),imageOffset:T,infoWindowOffset:eO,imageSize:gK,});hQ=hM+1;var hJ=100;var hK=new ay(hR,{icon:hL,zIndexFixed:true,baseZIndex:2500000-hJ*hM});hK.customProperty={type:e.type};i.addOverlay(hK);hK._stCode=hQ;if(hP){hK.setTitle(hP)}return hK};ft.CBK_SEARCH_COMPLETE=1;ft.CBK_MARKERS_SET=2;ft.CBK_INFO_HTML_SET=3;ft.CBK_POLYLINES_SET=4;ft.CBK_RESULTS_HTML_SET=5;ft.CBK_BUSLIST_COMPLETE=6;ft.CBK_BUSLINE_COMPLETE=7;ft.CBK_BUSLISTHTML_SET=8;ft.CBK_BUSLINEHTML_SET=9;ft._getPoiUrl=function(e,i){if(e){return eV.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};ft._getLocType=function(e){if(!e){return gp}if(typeof e=="string"){return ch}if(e instanceof hj||e instanceof cX){return g3}if(e instanceof c2){return gO}if(typeof e=="number"){return b3}return gp};C.extend(ft.prototype,{_getIdByLoc:function(hJ,e){var i=ft._getLocType(hJ.src);if(i==gp){return}var T=this;if(i==b3){e&&e(hJ.src);return}if(i==ch){if(hJ.curLocType==i&&hJ.curSrc==hJ.src&&hJ.curId){e&&e(hJ.curId);return}hJ.curLocType=i;hJ.curSrc=hJ.src;cv.request(function(hL){if(hL&&hL.result&&hL.result["type"]==gg){T._loc.curId=hL.content["code"];e&&e(T._loc.curId)}},{qt:ex,wd:hJ.src})}else{var hI;var hK=18;if(i==gO){if(hJ.src.isLoaded()){hI=hJ.src.getCenter();hK=hJ.src.getZoom()}else{hJ.src.addEventListener("load",function(){T._getIdByLoc(hJ,e)})}}else{hI=hJ.src}if(i==hJ.curLocType&&hJ.curSrc.equals(hI)&&hJ.curId){e&&e(hJ.curId);return}if(i==gO){hI=ef.convertLL2MC(hI)}if(i==g3){hI=ef.convertLL2MC(hI)}hJ.curLocType=i;hJ.curSrc=new hj(hI.lng,hI.lat);cv.request(function(hL){if(hL&&hL.result&&hL.result["type"]==fF){T._loc.curId=hL.content?hL.content["uid"]:1;e&&e(T._loc.curId)}},{qt:bX,b:hI.lng+","+hI.lat+";"+hI.lng+","+hI.lat,l:hK})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,hI){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var hJ;switch(i){case ft.CBK_SEARCH_COMPLETE:hJ=this._opts.onSearchComplete;hJ&&hJ(e,T);break;case ft.CBK_MARKERS_SET:hJ=this._opts.onMarkersSet;hJ&&hJ(e,hI);break;case ft.CBK_POLYLINES_SET:hJ=this._opts.onPolylinesSet;hJ&&hJ(e,hI);break;case ft.CBK_INFO_HTML_SET:hJ=this._opts.onInfoHtmlSet;hJ&&hJ(e,hI);break;case ft.CBK_RESULTS_HTML_SET:hJ=this._opts.onResultsHtmlSet;hJ&&hJ(e,hI);break;case ft.CBK_BUSLIST_COMPLETE:hJ=this._opts.onGetBusListComplete;hJ&&hJ(e,hI);break;case ft.CBK_BUSLINE_COMPLETE:hJ=this._opts.onGetBusLineComplete;hJ&&hJ(e,hI);break;case ft.CBK_BUSLISTHTML_SET:hJ=this._opts.onBusListHtmlSet;hJ&&hJ(e,hI);break;case ft.CBK_BUSLINEHTML_SET:hJ=this._opts.onBusLineHtmlSet;hJ&&hJ(e,hI);break;default:break}}});var fn=0;var cB=1;var gZ=2;O.unique=function(T){var hK=false;var hJ=[];var hL={};for(var hI=0,e=T.length;hI<e;hI++){if(!hL[T[hI]]){hL[T[hI]]=true;hJ.push(T[hI])}}return hJ};O.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};O.parseGeo=function(hL,hO){if(typeof hL!="string"||!hL){return}var hQ=hL.split("|");var e;var hJ;var T;if(hQ.length==1){e=f1(hL)}else{e=f1(hQ[2]);hJ=f1(hQ[0]);T=f1(hQ[1]);if(!hO){return e}}var hM={type:e.geoType};if(hO){switch(hM.type){case gZ:var hN=new hj(e.geo[0][0],e.geo[0][1]);var hP=ef.convertMC2LL(hN);hM.point=hP;hM.points=[hP];break;case cB:hM.points=[];var hR=e.geo[0];for(var hK=0,hI=hR.length-1;hK<hI;hK+=2){var hS=new hj(hR[hK],hR[hK+1]);hS=ef.convertMC2LL(hS);hM.points.push(hS)}hJ=new hj(hJ.geo[0][0],hJ.geo[0][1]);T=new hj(T.geo[0][0],T.geo[0][1]);hJ=ef.convertMC2LL(hJ);T=ef.convertMC2LL(T);hM.bounds=new dM(hJ,T);break;default:break}}return hM};O.parseGeoExt=function(h1,hS){if(!hS){hS=0}else{if(hS<0.25){hS=0}else{if(hS>0.25&&hS<1){hS=1}else{if(hS>32){hS=32}}}}var hN=h1.split("|");if(hN.length==1){var hI=f1(hN[0]);return{type:hI.type,bound:"",points:hI.geo.join(",")}}else{if(hN.length>1){var hT=h1.split(";.=");var hP=[];var hJ=[];var hU=0;var hY=hT.length;for(var hV=0;hV<hY;hV++){var h0=hT[hV];if(hY>1){if(hV==0){h0=h0+";"}if(hV>0&&hV<hY-1){h0=".="+h0+";"}if(hV==hY-1){h0=".="+h0}}var hK=h0.split("|");var hX=f1(hK[0]);var hW=f1(hK[1]);hP.push(hX.geo.join(","));hP.push(hW.geo.join(","));var hI=f1(hK[2]);hU=hI.type;var hZ=hI.geo.join(",");hZ=O.parseGeoExtReg1(hZ);if(hS>0){hZ=O.parseGeoExtReg2(hZ,hS)}hJ.push(hZ)}if(hY<=1){hJ=hJ.join(";")}if(hY==2){var T=hJ[0]+";"+hJ[1];var hL=T.split(";");var e=[];for(var hV=0;hV<hL.length;hV++){var hO=hL[hV].split(",")[0];var hM=hL[hV].split(",")[1];var hQ=new hj(hO,hM);var hR=ef.convertMC2LL(hQ);e.push(hR)}hJ=e}return{type:hU,bound:hP.join(";"),points:hJ}}}};O.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=C.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(C.trim(T[0]));T[1]=parseFloat(C.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};O.parseGeoStr=function(T){var i=T.split(",");var e=new hj(i[0],i[1]);return ef.convertMC2LL(e)};O.level={country:4,province:11,city:12,area:13};var hA=["=",".","-","*"];var fV=1<<23;function f1(hO){var hN=a4(hO.charAt(0));var T=hO.substr(1);var hQ=0;var e=T.length;var hR=[];var hL=[];var hM=[];while(hQ<e){if(T.charAt(hQ)==hA[0]){if((e-hQ)<13){return 0}hM=aH(T.substr(hQ,13),hR);if(hM<0){return 0}hQ+=13}else{if(T.charAt(hQ)==";"){hL.push(hR.slice(0));hR.length=0;++hQ}else{if((e-hQ)<8){return 0}hM=c0(T.substr(hQ,8),hR);if(hM<0){return 0}hQ+=8}}}for(var hK=0,hI=hL.length;hK<hI;hK++){for(var hJ=0,hP=hL[hK].length;hJ<hP;hJ++){hL[hK][hJ]/=100}}return{geoType:hN,geo:hL}}function a4(i){var e=-1;if(i==hA[1]){e=gZ}else{if(i==hA[2]){e=cB}else{if(i==hA[3]){e=fn}}}return e}function aH(hJ,T){var e=0;var hL=0;var hK=0;for(var hI=0;hI<6;hI++){hK=cI(hJ.substr(1+hI,1));if(hK<0){return -1-hI}e+=hK<<(6*hI);hK=cI(hJ.substr(7+hI,1));if(hK<0){return -7-hI}hL+=hK<<(6*hI)}T.push(e);T.push(hL);return 0}function c0(hK,hI){var T=hI.length;if(T<2){return -1}var e=0;var hM=0;var hL=0;for(var hJ=0;hJ<4;hJ++){hL=cI(hK.substr(hJ,1));if(hL<0){return -1-hJ}e+=hL<<(6*hJ);hL=cI(hK.substr(4+hJ,1));if(hL<0){return -5-hJ}hM+=hL<<(6*hJ)}if(e>fV){e=fV-e}if(hM>fV){hM=fV-hM}hI.push(hI[T-2]+e);hI.push(hI[T-1]+hM);return 0}function cI(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}O.pathToPoints=function(hK){var hI=[];if(typeof hK!=="string"){return hI}else{var hJ=hK.split(";");for(var T=0;T<hJ.length;T++){var e=hJ[T].split(",");hI.push(new hj(e[0],e[1]))}}return hI};');
