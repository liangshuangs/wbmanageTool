/**/ï»¿_jsload&&_jsload('autocomplete', 'var gx,gF=gx=gF||{version:"1.3.4"};gF.guid="$BAIDU$";window[gF.guid]=window[gF.guid]||{};gF.object=gF.object||{};gF.extend=gF.object.extend=function(T,e){for(var i in e){if(e.hasOwnProperty(i)){T[i]=e[i]}}return T};gF.dom=gF.dom||{};gF.dom.g=function(e){if("string"==typeof e||e instanceof String){return document.getElementById(e)}else{if(e&&e.nodeName&&(e.nodeType==1||e.nodeType==9)){return e}}return null};gF.g=gF.G=gF.dom.g;gF.dom.hide=function(e){e=gF.dom.g(e);if(e===null){return e}e.style.display="none";return e};gF.hide=gF.dom.hide;gF.lang=gF.lang||{};gF.lang.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)};gF.isString=gF.lang.isString;gF.lang.isEmptyObject=function(T){if(Object.prototype.toString.call(T)==="[object Object]"){for(var e in T){return false}return true}else{return false}return"[object String]"==Object.prototype.toString.call(T)};gF.isEmptyObject=gF.lang.isEmptyObject;gF.dom._g=function(e){if(gF.lang.isString(e)){return document.getElementById(e)}return e};gF._g=gF.dom._g;gF.dom.getElementsByClassName=function(e,i){if(e.getElementsByClassName){return e.getElementsByClassName(i)}else{return(function T(hP,hN){if(hN==null){hN=document}var hM=[],hL=hN.getElementsByTagName("*"),hI=hL.length,hO=new RegExp("(^|\\\\s)"+hP+"(\\\\s|$)"),hK,hJ;for(hK=0,hJ=0;hK<hI;hK++){if(hO.test(hL[hK].className)){hM[hJ]=hL[hK];hJ++}}return hM})(i,e)}};gF.getElementsByClassName=gF.dom.getElementsByClassName;gF.dom.contains=function(e,i){var T=gF.dom._g;e=T(e);i=T(i);return e.contains?e!=i&&e.contains(i):!!(e.compareDocumentPosition(i)&16)};gF.browser=gF.browser||{};if(/msie (\\d+\\.\\d)/i.test(navigator.userAgent)){gF.browser.ie=gF.ie=document.documentMode||+RegExp["\\x241"]}gF.dom._NAME_ATTRS=(function(){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(gF.browser.ie<8){e["for"]="htmlFor";e["class"]="className"}else{e.htmlFor="for";e.className="class"}return e})();gF.dom.setAttr=function(i,e,T){i=gF.dom.g(i);if(i===null){return i}if("style"==e){i.style.cssText=T}else{e=gF.dom._NAME_ATTRS[e]||e;i.setAttribute(e,T)}return i};gF.setAttr=gF.dom.setAttr;gF.dom.setAttrs=function(T,e){T=gF.dom.g(T);if(T===null){return T}for(var i in e){gF.dom.setAttr(T,i,e[i])}return T};gF.setAttrs=gF.dom.setAttrs;gF.string=gF.string||{};(function(){var e=new RegExp("(^[\\\\s\\\\t\\\\xa0\\\\u3000]+)|([\\\\u3000\\\\xa0\\\\s\\\\t]+\\x24)","g");gF.string.trim=function(i){return String(i).replace(e,"")}})();gF.trim=gF.string.trim;gF.string.format=function(T,e){T=String(T);var i=Array.prototype.slice.call(arguments,1),hI=Object.prototype.toString;if(i.length){i=i.length==1?(e!==null&&(/\\[object Array\\]|\\[object Object\\]/.test(hI.call(e)))?e:i):i;return T.replace(/#\\{(.+?)\\}/g,function(hJ,hL){var hK=i[hL];if("[object Function]"==hI.call(hK)){hK=hK(hL)}return("undefined"==typeof hK?"":hK)})}return T};gF.format=gF.string.format;gF.dom.removeClass=function(hL,hM){hL=gF.dom.g(hL);if(hL===null){return hL}var hJ=hL.className.split(/\\s+/),hN=hM.split(/\\s+/),T,e=hN.length,hI,hK=0;for(;hK<e;++hK){for(hI=0,T=hJ.length;hI<T;++hI){if(hJ[hI]==hN[hK]){hJ.splice(hI,1);break}}}hL.className=hJ.join(" ");return hL};gF.removeClass=gF.dom.removeClass;gF.dom.insertHTML=function(hI,e,T){hI=gF.dom.g(hI);if(hI===null){return hI}var i,hJ;if(hI.insertAdjacentHTML){hI.insertAdjacentHTML(e,T)}else{i=hI.ownerDocument.createRange();e=e.toUpperCase();if(e=="AFTERBEGIN"||e=="BEFOREEND"){i.selectNodeContents(hI);i.collapse(e=="AFTERBEGIN")}else{hJ=e=="BEFOREBEGIN";i[hJ?"setStartBefore":"setEndAfter"](hI);i.collapse(hJ)}i.insertNode(i.createContextualFragment(T))}return hI};gF.insertHTML=gF.dom.insertHTML;gF.dom.show=function(e){e=gF.dom.g(e);if(e===null){return e}e.style.display="";return e};gF.show=gF.dom.show;gF.dom.getDocument=function(e){e=gF.dom.g(e);if(e===null){return e}return e.nodeType==9?e:e.ownerDocument||e.document};gF.dom.addClass=function(hL,hM){hL=gF.dom.g(hL);if(hL===null){return hL}var T=hM.split(/\\s+/),e=hL.className,hK=" "+e+" ",hJ=0,hI=T.length;for(;hJ<hI;hJ++){if(hK.indexOf(" "+T[hJ]+" ")<0){e+=" "+T[hJ]}}hL.className=e;return hL};gF.addClass=gF.dom.addClass;gF.dom._styleFixer=gF.dom._styleFixer||{};gF.dom._styleFilter=gF.dom._styleFilter||[];gF.dom._styleFilter.filter=function(T,hK,hL){var hJ=gF.dom._styleFilter;var hI;for(var e=0;hI=hJ[e];e++){if(hI=hI[hL]){hK=hI(T,hK)}}return hK};gF.string.toCamelCase=function(e){if(e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(i){return i.charAt(1).toUpperCase()})};gF.dom.toggleClass=function(e,i){if(gF.dom.hasClass(e,i)){gF.dom.removeClass(e,i)}else{gF.dom.addClass(e,i)}};gF.dom.hasClass=function(T){if(arguments.length<=0||typeof T==="function"){return this}if(this.size()<=0){return false}T=T.replace(/^\\s+/g,"").replace(/\\s+$/g,"").replace(/\\s+/g," ");var i=T.split(" ");var e;gF.forEach(this,function(hJ){var hK=hJ.className;for(var hI=0;hI<i.length;hI++){if(!~(" "+hK+" ").indexOf(" "+i[hI]+" ")){e=false;return}}if(e!==false){e=true;return}});return e};gF.dom.getStyle=function(T,i){var hK=gF.dom;T=hK.g(T);if(T===null){return T}i=gF.string.toCamelCase(i);var hJ=T.style[i];if(!hJ){var e=hK._styleFixer[i],hI=T.currentStyle||(gF.browser.ie?T.style:getComputedStyle(T,null));hJ=e&&e.get?e.get(T,hI):hI[e||i]}if(e=hK._styleFilter){hJ=e.filter(i,hJ,"get")}return hJ};gF.getStyle=gF.dom.getStyle;if(/opera\\/(\\d+\\.\\d)/i.test(navigator.userAgent)){gF.browser.opera=+RegExp["\\x241"]}gF.browser.isWebkit=/webkit/i.test(navigator.userAgent);gF.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);gF.browser.isStrict=document.compatMode=="CSS1Compat";gF.dom.getPosition=function(e){e=gF.dom.g(e);if(e===null){return e}var hO=gF.dom.getDocument(e),hI=gF.browser,hL=gF.dom.getStyle,T=hI.isGecko>0&&hO.getBoxObjectFor&&hL(e,"position")=="absolute"&&(e.style.top===""||e.style.left===""),hM={left:0,top:0},hK=(hI.ie&&!hI.isStrict)?hO.body:hO.documentElement,hP,i;if(e==hK){return hM}if(e.getBoundingClientRect){i=e.getBoundingClientRect();hM.left=Math.floor(i.left)+Math.max(hO.documentElement.scrollLeft,hO.body.scrollLeft);hM.top=Math.floor(i.top)+Math.max(hO.documentElement.scrollTop,hO.body.scrollTop);hM.left-=hO.documentElement.clientLeft;hM.top-=hO.documentElement.clientTop;var hN=hO.body,hQ=parseInt(hL(hN,"borderLeftWidth")),hJ=parseInt(hL(hN,"borderTopWidth"));if(hI.ie&&!hI.isStrict){hM.left-=isNaN(hQ)?2:hQ;hM.top-=isNaN(hJ)?2:hJ}}else{hP=e;do{hM.left+=hP.offsetLeft;hM.top+=hP.offsetTop;if(hI.isWebkit>0&&hL(hP,"position")=="fixed"){hM.left+=hO.body.scrollLeft;hM.top+=hO.body.scrollTop;break}hP=hP.offsetParent}while(hP&&hP!=e);if(hI.opera>0||(hI.isWebkit>0&&hL(e,"position")=="absolute")){hM.top-=hO.body.offsetTop}hP=e.offsetParent;while(hP&&hP!=hO.body){hM.left-=hP.scrollLeft;if(!hI.opera||hP.tagName!="TR"){hM.top-=hP.scrollTop}hP=hP.offsetParent}}return hM};if(/firefox\\/(\\d+\\.\\d)/i.test(navigator.userAgent)){gF.browser.firefox=+RegExp["\\x241"]}if(/BIDUBrowser/i.test(navigator.userAgent)){gF.browser.baidu=true}(function(){var e=navigator.userAgent;if(/(\\d+\\.\\d)?(?:\\.\\d)?\\s+safari\\/?(\\d+\\.\\d+)?/i.test(e)&&!/chrome/i.test(e)){gF.browser.safari=+(RegExp["\\x241"]||RegExp["\\x242"])}})();if(/chrome\\/(\\d+\\.\\d)/i.test(navigator.userAgent)){gF.browser.chrome=+RegExp["\\x241"]}gF.array=gF.array||{};gF.array.each=function(hL,hJ){var hI;var hK;var T;var e=hL.length;if("function"==typeof hJ){for(T=0;T<e;T++){hK=hL[T];hI=hJ.call(hL,hK,T);if(hI===false){break}}}return hL};gF.each=gF.array.each;gF.lang.guid=function(){return"TANGRAM__"+(window[gF.guid]["_counter"]++).toString(36)};window[gF.guid]["_counter"]=window[gF.guid]["_counter"]||1;window[gF.guid]["_instances"]=window[gF.guid]["_instances"]||{};gF.lang.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)};gF.lang.Class=function(e){this.guid=e||gF.lang.guid();window[gF.guid]["_instances"][this.guid]=this};window[gF.guid]["_instances"]=window[gF.guid]["_instances"]||{};gF.lang.Class.prototype.dispose=function(){delete window[gF.guid]["_instances"][this.guid];for(var e in this){if(!gF.lang.isFunction(this[e])){delete this[e]}}this.disposed=true};gF.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};gF.lang.Event=function(e,i){this.type=e;this.returnValue=true;this.target=i||null;this.currentTarget=null};gF.lang.Class.prototype.addEventListener=function(hI,T,i){if(!gF.lang.isFunction(T)){return}!T.__code&&(T.__code={});!this.__listeners&&(this.__listeners={});var e=this.__listeners,hJ;if(typeof i=="string"&&i){if(/[^\\w\\-]/.test(i)){throw ("nonstandard key:"+i)}else{T.hashCode=i;hJ=i}}hI.indexOf("on")!=0&&(hI="on"+hI);typeof e[hI]!="object"&&(e[hI]={});typeof T.__code[hI]!="object"&&(T.__code[hI]={});hJ=hJ||gF.lang.guid();T.__code[hI].hashCode=hJ;e[hI][hJ]=T};gF.lang.Class.prototype.removeEventListener=function(T,i){T.indexOf("on")!=0&&(T="on"+T);if(gF.lang.isFunction(i)){if(!i.__code||!i.__code[T]){return}i=i.__code[T].hashCode}else{if(!gF.lang.isString(i)){return}}!this.__listeners&&(this.__listeners={});var e=this.__listeners;if(!e[T]){return}e[T][i]&&delete e[T][i]};gF.lang.Class.prototype.dispatchEvent=function(hJ,e){if(gF.lang.isString(hJ)){hJ=new gF.lang.Event(hJ)}!this.__listeners&&(this.__listeners={});e=e||{};for(var hI in e){hJ[hI]=e[hI]}var hI;var T=this.__listeners;var hK=hJ.type;hJ.target=hJ.target||this;hJ.currentTarget=this;hK.indexOf("on")!=0&&(hK="on"+hK);gF.lang.isFunction(this[hK])&&this[hK].apply(this,arguments);if(typeof T[hK]=="object"){for(hI in T[hK]){T[hK][hI].apply(this,arguments)}}return hJ.returnValue};gF.lang.inherits=function(hL,hJ,hI){var T,hK,e=hL.prototype,i=new Function();i.prototype=hJ.prototype;hK=hL.prototype=new i();for(T in e){hK[T]=e[T]}hL.prototype.constructor=hL;hL.superClass=hJ.prototype;if("string"==typeof hI){hK._className=hI}};gF.inherits=gF.lang.inherits;gF.lang.instance=function(e){return window[gF.guid]["_instances"][e]||null};gF.dom.getComputedStyle=function(i,e){i=gF.dom._g(i);var hI=gF.dom.getDocument(i),T;if(hI.defaultView&&hI.defaultView.getComputedStyle){T=hI.defaultView.getComputedStyle(i,null);if(T){return T[e]||T.getPropertyValue(e)}}return""};gF.dom.remove=function(e){e=gF.dom._g(e);var i=e.parentNode;i&&i.removeChild(e)};gF.lang.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)};gF.event=gF.event||{};gF.event.stopPropagation=function(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}};gF.event.preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};gF.event.stop=function(i){var T=gF.event;T.stopPropagation(i);T.preventDefault(i)};gF.array.indexOf=function(hJ,i,hI){var e=hJ.length,T=i;hI=hI|0;if(hI<0){hI=Math.max(0,e+hI)}for(;hI<e;hI++){if(hI in hJ&&hJ[hI]===i){return hI}}return -1};gF.array.contains=function(e,i){return(gF.array.indexOf(e,i)>=0)};gF.ui=gF.ui||{version:"1.3.9"};gF.ui.getUI=function(hI){var hI=hI.split("-"),T=gF.ui,e=hI.length,hJ=0;for(;hJ<e;hJ++){T=T[hI[hJ].charAt(0).toUpperCase()+hI[hJ].slice(1)]}return T};gF.ui.create=function(i,e){if(gF.lang.isString(i)){i=gF.ui.getUI(i)}return new i(e)};gF.event._listeners=gF.event._listeners||[];gF.event.on=function(i,hJ,hL){hJ=hJ.replace(/^on/i,"");i=gF.dom._g(i);var hK=function(hN){hL.call(i,hN)};var e=gF.event._listeners;var hI=gF.event._eventFilter;var hM;var T=hJ;hJ=hJ.toLowerCase();if(hI&&hI[hJ]){hM=hI[hJ](i,hJ,hK);T=hM.type;hK=hM.listener}if(i&&i.addEventListener){i.addEventListener(T,hK,false)}else{if(i&&i.attachEvent){i.attachEvent("on"+T,hK)}}e[e.length]=[i,hJ,hL,hK,T];return i};gF.on=gF.event.on;gF.event.un=function(T,hK,i){T=gF.dom._g(T);hK=hK.replace(/^on/i,"").toLowerCase();var hN=gF.event._listeners,hI=hN.length,hJ=!i,hM,hL,e;while(hI--){hM=hN[hI];if(hM[1]===hK&&hM[0]===T&&(hJ||hM[2]===i)){hL=hM[4];e=hM[3];if(T.removeEventListener){T.removeEventListener(hL,e,false)}else{if(T.detachEvent){T.detachEvent("on"+hL,e)}}hN.splice(hI,1)}}return T};gF.un=gF.event.un;gF.ui.Base={id:"",getId:function(e){var T=this,i;i="tangram-"+T.uiType+"--"+(T.id?T.id:T.guid);return e?i+"-"+e:i},getClass:function(i){var hI=this,T=hI.classPrefix,e=hI.skin;if(i){T+="-"+i;e+="-"+i}if(hI.skin){T+=" "+e}return T},getMain:function(){return C.G(this.mainId)},getBody:function(){return C.G(this.getId())},uiType:"",getCallRef:function(){return"window[\'$BAIDU$\']._instances[\'"+this.guid+"\']"},getCallString:function(hJ){var hI=0,T=Array.prototype.slice.call(arguments,1),e=T.length;for(;hI<e;hI++){if(typeof T[hI]=="string"){T[hI]="\'"+T[hI]+"\'"}}return this.getCallRef()+"."+hJ+"("+T.join(",")+");"},on:function(e,i,T){gF.on(e,i,T);this.addEventListener("ondispose",function(){gF.un(e,i,T)})},renderMain:function(T){var hJ=this,hI=0,e;if(hJ.getMain()){return}T=C.G(T);if(!T){T=document.createElement("div");document.body.appendChild(T);T.style.position="absolute";T.className=hJ.getClass("main")}if(!T.id){T.id=hJ.getId("main")}hJ.mainId=T.id;T.setAttribute("data-guid",hJ.guid);return T},dispose:function(){this.dispatchEvent("dispose");gF.lang.Class.prototype.dispose.call(this)}};gF.ui.createUI=function(hI,hO){hO=hO||{};var hM=hO.superClass||gF.lang.Class;var hL=hM==gF.lang.Class?1:0;var hJ;var T;var hN=function(hP,i){var hQ=this;hP=hP||{};hM.call(hQ,!hL?hP:(hP.guid||""),true);gF.object.extend(hQ,hN.options);gF.object.extend(hQ,hP);hQ.classPrefix=hQ.classPrefix||"tangram-"+hQ.uiType.toLowerCase();for(hJ in gF.ui.behavior){if(typeof hQ[hJ]!="undefined"&&hQ[hJ]){gF.object.extend(hQ,gF.ui.behavior[hJ]);if(gF.lang.isFunction(hQ[hJ])){hQ.addEventListener("onload",function(){gF.ui.behavior[hJ].call(hQ[hJ].apply(hQ))})}else{gF.ui.behavior[hJ].call(hQ)}}}hI.apply(hQ,arguments);for(hJ=0,T=hN._addons.length;hJ<T;hJ++){hN._addons[hJ](hQ)}if(hP.parent&&hQ.setParent){hQ.setParent(hP.parent)}if(!i&&hP.autoRender){hQ.render(hP.element)}},e=function(){};e.prototype=hM.prototype;var hK=hN.prototype=new e();for(hJ in gF.ui.Base){hK[hJ]=gF.ui.Base[hJ]}hN.extend=function(i){for(hJ in i){hN.prototype[hJ]=i[hJ]}return hN};hN._addons=[];hN.register=function(i){if(typeof i=="function"){hN._addons.push(i)}};hN.options={};return hN};gF.dom.getAttr=function(i,e){i=gF.dom.g(i);if(i===null){return i}if("style"==e){return i.style.cssText}e=gF.dom._NAME_ATTRS[e]||e;return i.getAttribute(e)};gF.getAttr=gF.dom.getAttr;gF.ui.get=function(e){var i;if(gF.lang.isString(e)){return gF.lang.instance(e)}else{do{if(!e||e.nodeType==9){return null}if(i=gF.dom.getAttr(e,"data-guid")){return gF.lang.instance(i)}}while((e=e.parentNode)!=document.body)}};gF.ui.Suggestion=gF.ui.createUI(function(e){var i=this;i.addEventListener("onload",function(){eventName=fW()?"touchstart":"mousedown";i.on(document,eventName,i.documentMousedownHandler);i.on(window,"blur",i.windowBlurHandler)});i.documentMousedownHandler=i._getDocumentMousedownHandler();i.windowBlurHandler=i._getWindowBlurHandler();i.enableIndex=[];i.currentIndex=-1}).extend({uiType:"suggestion",onbeforepick:new Function,onpick:new Function,onconfirm:new Function,onhighlight:new Function,onshow:new Function,onhide:new Function,getData:function(){return[]},prependHTML:"",appendHTML:"",currentData:{},tplDOM:"<div id=\'#{0}\' class=\'#{1}\' style=\'position:relative; top:0px; left:0px\'></div>",tplPrependAppend:"<div id=\'#{0}\' class=\'#{1}\'>#{2}</div>",tplClose:\'<div style="height:22px;line-height:22px;overflow:hidden;zoom:1;border-top:#E7E7E7 solid 1px;background:#F7F7F7;"><span style="float:right;color:#4B4B4B;border-left:1px solid #E7E7E7;padding:0 10px;font-size:14px;" onmousedown="#{0}">å³é­</span></div>\',tplBody:\'<table cellspacing="0" cellpadding="2"><tbody>#{0}</tbody></table>\',tplRow:\'<tr><td id="#{0}" onmouseover="#{2}" onmouseout="#{3}" onmousedown="#{4}" onclick="#{5}" class="#{6}"><i class="route-icon">#{1}</i></td></tr>\',getString:function(){var e=this;return gF.format(e.tplDOM,e.getId(),e.getClass(),e.guid)},render:function(hI,i){var T=this;var e;var hI=C.G(hI);T.baseDom=i;if(T.getMain()||!hI){return}if(hI.id){T.targetId=hI.id}else{T.targetId=hI.id=T.getId("input")}e=T.renderMain();e.style.display="none";e.innerHTML=T.getString();this.dispatchEvent("onload")},_isShowing:function(){var i=this,e=i.getMain();return e&&e.style.display!="none"},pick:function(e){var hI=this,i=hI.currentData,hJ=i&&typeof e=="number"&&typeof i[e]!="undefined"?i[e].value:e,T={data:{item:hJ==e?{value:e,content:e}:i[e],index:e}};if(hI.dispatchEvent("onbeforepick",T)){hI.dispatchEvent("onpick",T)}},show:function(hL,hK,hI){var T=0,e=hK.length,hJ=this;hJ.enableIndex=[];hJ.currentIndex=-1;if(e==0&&!hI){hJ.hide()}else{hJ.currentData=[];for(;T<e;T++){if(typeof hK[T].value!="undefined"){hJ.currentData.push(hK[T])}else{hJ.currentData.push({value:hK[T],content:hK[T]})}if(typeof hK[T]["disable"]=="undefined"||hK[T]["disable"]==false){hJ.enableIndex.push(T)}}hJ.getBody().innerHTML=hJ._getBodyString();hJ.getMain().style.display="block";hJ.dispatchEvent("onshow")}},hide:function(){var hK=this;if(!hK._isShowing()){return}if(hK.currentIndex>=0&&hK.holdHighLight){var hJ=hK.currentData,T=-1;for(var hI=0,e=hJ.length;hI<e;hI++){if(typeof hJ[hI].disable=="undefined"||hJ[hI].disable==false){T++;if(T==hK.currentIndex){hK.pick(hI)}}}}hK.getMain().style.display="none";hK.dispatchEvent("onhide")},highLight:function(e){var T=this,hI=T.enableIndex,i=null;if(!T._isEnable(e)){return}T.currentIndex>=0&&T._clearHighLight();i=T._getItem(e);gF.addClass(i,T.getClass("current"));T.currentIndex=gF.array.indexOf(hI,e);T.dispatchEvent("onhighlight",{index:e,data:T.getDataByIndex(e)})},clearHighLight:function(){var T=this,e=T.currentIndex,i=T.enableIndex[e];T._clearHighLight()&&T.dispatchEvent("onclearhighlight",{index:i,data:T.getDataByIndex(i)})},_clearHighLight:function(){var T=this,e=T.currentIndex,hI=T.enableIndex,i=null;if(e>=0){i=T._getItem(hI[e]);gF.removeClass(i,T.getClass("current"));T.currentIndex=-1;return true}return false},confirm:function(e,T){var i=this;if(T!="keyboard"){if(!i._isEnable(e)){return}}i.pick(e);i.dispatchEvent("onconfirm",{data:i.getDataByIndex(e)||e,source:T});i.currentIndex=-1;i.hide()},getDataByIndex:function(e){return{item:this.currentData[e],index:e}},getTargetValue:function(){return this.getTarget().value},getTarget:function(){return C.G(this.targetId)},_getItem:function(e){return C.G(this.getId("item"+e))},_getBodyString:function(){var hL=this,hK="",hJ=[],hM=hL.currentData,e=hM.length,hI=0;function T(i){return gF.format(hL.tplPrependAppend,hL.getId(i),hL.getClass(i),hL[i+"HTML"])}for(;hI<e;hI++){hJ.push(gF.format(hL.tplRow,hL.getId("item"+hI),hM[hI].content,hL.getCallRef()+"._itemOver(event, "+hI+")",hL.getCallRef()+"._itemOut(event, "+hI+")",hL.getCallRef()+"._itemDown(event, "+hI+")",hL.getCallRef()+"._itemClick(event, "+hI+")",(typeof hM[hI]["disable"]=="undefined"||hM[hI]["disable"]==false)?"":hL.getClass("disable")))}hK+=gF.format(hL.tplBody,hJ.join(""));if(fW()){hK+=gF.format(hL.tplClose,hL.getCallRef()+"._close(event)")}return hK},_close:function(i){this.hide()},_itemOver:function(hI,i){var T=this;gF.event.stop(hI||window.event);T._isEnable(i)&&T.highLight(i);T.dispatchEvent("onmouseoveritem",{index:i,data:T.getDataByIndex(i)})},_itemOut:function(hI,i){var T=this;gF.event.stop(hI||window.event);if(!T.holdHighLight){T._isEnable(i)&&T.clearHighLight()}T.dispatchEvent("onmouseoutitem",{index:i,data:T.getDataByIndex(i)})},_itemDown:function(hI,i){var T=this;gF.event.stop(hI||window.event);T.dispatchEvent("onmousedownitem",{index:i,data:T.getDataByIndex(i)})},_itemClick:function(hI,i){var T=this;gF.event.stop(hI||window.event);T.dispatchEvent("onitemclick",{index:i,data:T.getDataByIndex(i)});T._isEnable(i)&&T.confirm(i,"mouse")},_isEnable:function(e){var i=this;return gF.array.contains(i.enableIndex,e)},_getDocumentMousedownHandler:function(){var e=this;return function(hI){hI=hI||window.event;var i=hI.target||hI.srcElement,T=gF.ui.get(i);if(i==e.getTarget()||(T&&T.uiType==e.uiType)){return}e.hide()}},_getWindowBlurHandler:function(){var e=this;return function(){e.hide()}},dispose:function(){var e=this;e.dispatchEvent("dispose");gF.dom.remove(e.mainId);gF.lang.Class.prototype.dispose.call(this)}});gF.ui.behavior=gF.ui.behavior||{};gF.dom.children=function(i){i=gF.dom.g(i);if(i===null){return i}for(var e=[],T=i.firstChild;T;T=T.nextSibling){if(T.nodeType==1){e.push(T)}}return e};gF.dom.insertBefore=function(hI,T){var i,e;i=gF.dom._g;hI=i(hI);T=i(T);e=T.parentNode;if(e){e.insertBefore(hI,T)}return hI};gF.dom.setStyle=function(T,i,hI){var hJ=gF.dom,e;T=hJ.g(T);i=gF.string.toCamelCase(i);if(e=hJ._styleFilter){hI=e.filter(i,hI,"set")}e=hJ._styleFixer[i];(e&&e.set)?e.set(T,hI):(T.style[e||i]=hI);return T};gF.setStyle=gF.dom.setStyle;gF.dom.setStyles=function(i,T){i=gF.dom.g(i);if(i===null){return i}for(var e in T){gF.dom.setStyle(i,e,T[e])}return i};gF.setStyles=gF.dom.setStyles;gF.dom._styleFilter[gF.dom._styleFilter.length]={set:function(e,i){if(i.constructor==Number&&!/zIndex|fontWeight|opacity|zoom|lineHeight/i.test(e)){i=i+"px"}return i}};gF.dom.setBorderBoxSize=function(T,i){var e={};i.width&&(e.width=parseFloat(i.width));i.height&&(e.height=parseFloat(i.height));function hI(hK,hJ){return parseFloat(gF.getStyle(hK,hJ))||0}if(gF.browser.isStrict){if(i.width){e.width=parseFloat(i.width)-hI(T,"paddingLeft")-hI(T,"paddingRight")-hI(T,"borderLeftWidth")-hI(T,"borderRightWidth");e.width<0&&(e.width=0)}if(i.height){e.height=parseFloat(i.height)-hI(T,"paddingTop")-hI(T,"paddingBottom")-hI(T,"borderTopWidth")-hI(T,"borderBottomWidth");e.height<0&&(e.height=0)}}return gF.dom.setStyles(T,e)};(function(){var e=gF.ui.behavior.coverable=function(){};e.Coverable_isShowing=false;e.Coverable_iframe;e.Coverable_container;e.Coverable_iframeContainer;e.Coverable_show=function(){var hM=this;if(hM.Coverable_iframe){hM.Coverable_update();gF.setStyle(hM.Coverable_iframe,"display","block");return}var hK=hM.coverableOptions||{},T=hM.Coverable_container=hK.container||hM.getMain(),hJ=hK.opacity||"0",hI=hK.color||"",hL=hM.Coverable_iframe=document.createElement("iframe"),i=hM.Coverable_iframeContainer=document.createElement("div");gF.dom.children(T).length>0?gF.dom.insertBefore(i,T.firstChild):T.appendChild(i);gF.setStyles(i,{position:"absolute",top:"0px",left:"0px"});gF.dom.setBorderBoxSize(i,{width:T.offsetWidth,height:T.offsetHeight});gF.dom.setBorderBoxSize(hL,{width:i.offsetWidth});gF.dom.setStyles(hL,{zIndex:-1,display:"block",border:0,backgroundColor:hI,filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity="+hJ+")"});i.appendChild(hL);hL.src="javascript:void(0)";hL.frameBorder="0";hL.scrolling="no";hL.height="97%";hM.Coverable_isShowing=true};e.Coverable_hide=function(){var T=this,i=T.Coverable_iframe;if(!T.Coverable_isShowing){return}gF.setStyle(i,"display","none");T.Coverable_isShowing=false};e.Coverable_update=function(hI){var hK=this,hI=hI||{},T=hK.Coverable_container,i=hK.Coverable_iframeContainer,hJ=hK.Coverable_iframe;gF.dom.setBorderBoxSize(i,{width:T.offsetWidth,height:T.offsetHeight});gF.dom.setBorderBoxSize(hJ,gF.extend({width:gF.getStyle(i,"width")},hI))}})();gF.extend(gF.ui.Suggestion.prototype,{coverable:true,coverableOptions:{}});gF.ui.Suggestion.register(function(e){if(e.coverable){e.addEventListener("onshow",function(){e.Coverable_show()});e.addEventListener("onhide",function(){e.Coverable_hide()})}});gF.ui.Suggestion.extend({setData:function(hI,T,i){var e=this;e.dataCache[hI]=T;if(!i){e.show(hI,e.dataCache[hI])}}});gF.ui.Suggestion.register(function(e){e.dataCache={};e.addEventListener("onneeddata",function(T,hI){var i=e.dataCache;if(typeof i[hI]=="undefined"){e.getData(hI)}else{e.show(hI,i[hI])}})});gF.dom.setOuterWidth=gF.dom.setBorderBoxWidth=function(e,i){return gF.dom.setBorderBoxSize(e,{width:i})};gF.dom.getWindow=function(e){e=gF.dom.g(e);if(e===null){return e}var i=gF.dom.getDocument(e);return i.parentWindow||i.defaultView||null};gF.dom.setPosition=function(i,e){return gF.dom.setStyles(i,{left:e.left-(parseFloat(gF.dom.getStyle(i,"margin-left"))||0),top:e.top-(parseFloat(gF.dom.getStyle(i,"margin-top"))||0)})};gF.page=gF.page||{};gF.page.getViewWidth=function(){var i=document,e=i.compatMode=="BackCompat"?i.body:i.documentElement;return e.clientWidth};gF.page.getViewHeight=function(){var i=document,e=i.compatMode=="BackCompat"?i.body:i.documentElement;return e.clientHeight};gF.page.getScrollTop=function(){var e=document;return window.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop};gF.page.getScrollLeft=function(){var e=document;return window.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft};gF.fn=gF.fn||{};gF.fn.bind=function(i,e){var T=arguments.length>2?[].slice.call(arguments,2):null;return function(){var hJ=gF.lang.isString(i)?e[i]:i,hI=(T)?T.concat([].slice.call(arguments,0)):arguments;return hJ.apply(e||hJ,hI)}};(function(){var i=gF.ui.behavior.posable=function(){};i.setPosition=function(hL,hJ,hI){hJ=C.G(hJ)||this.getMain();hI=hI||{};var hK=this,T=[hJ,hL,hI];hK.__execPosFn(hJ,"_positionByCoordinate",hI.once,T)};i._positionByCoordinate=function(T,hV,hW,hJ){hV=hV||[0,0];hW=hW||{};var hS=this,hT={},hQ=gF.page.getViewHeight(),hU=gF.page.getViewWidth(),hN=gF.page.getScrollLeft(),hL=gF.page.getScrollTop(),hK=T.offsetWidth,hM=T.offsetHeight,hI=T.offsetParent,hR=(!hI||hI==document.body)?{left:0,top:0}:gF.dom.getPosition(hI);hW.position=(typeof hW.position!=="undefined")?hW.position.toLowerCase():"bottomright";hV=e(hV||[0,0]);hW.offset=e(hW.offset||[0,0]);hV.x+=(hW.position.indexOf("right")>=0?(hV.width||0):0);hV.y+=(hW.position.indexOf("bottom")>=0?(hV.height||0):0);hT.left=hV.x+hW.offset.x-hR.left;hT.top=hV.y+hW.offset.y-hR.top;switch(hW.insideScreen){case"surround":hT.left+=hT.left<hN?hK+(hV.width||0):((hT.left+hK)>(hN+hU)?-hK-(hV.width||0):0);hT.top+=hT.top<hL?hM+(hV.height||0):((hT.top+hM)>(hL+hQ)?-hM-(hV.height||0):0);break;case"fix":hT.left=Math.max(0-parseFloat(gF.dom.getStyle(T,"marginLeft"))||0,Math.min(hT.left,gF.page.getViewWidth()-hK-hR.left));hT.top=Math.max(0-parseFloat(gF.dom.getStyle(T,"marginTop"))||0,Math.min(hT.top,gF.page.getViewHeight()-hM-hR.top));break;case"verge":var hP={width:(hW.position.indexOf("right")>-1?hV.width:0),height:(hW.position.indexOf("bottom")>-1?hV.height:0)},hO={width:(hW.position.indexOf("bottom")>-1?hV.width:0),height:(hW.position.indexOf("right")>-1?hV.height:0)};hT.left-=(hW.position.indexOf("right")>=0?(hV.width||0):0);hT.top-=(hW.position.indexOf("bottom")>=0?(hV.height||0):0);hT.left+=hT.left+hP.width+hK-hN>hU-hR.left?hO.width-hK:hP.width;hT.top+=hT.top+hP.height+hM-hL>hQ-hR.top?hO.height-hM:hP.height;break}gF.dom.setPosition(T,hT);if(!hJ&&(hQ!=gF.page.getViewHeight()||hU!=gF.page.getViewWidth())){hS._positionByCoordinate(T,hV,{},true)}hJ||hS.dispatchEvent("onpositionupdate")};i.__execPosFn=function(hI,hL,hJ,T){var hK=this;if(typeof hJ=="undefined"||!hJ){gF.event.on(gF.dom.getWindow(hI),"resize",gF.fn.bind.apply(hK,[hL,hK].concat([].slice.call(T))))}hK[hL].apply(hK,T)};function e(T){T.x=T[0]||T.x||T.left||0;T.y=T[1]||T.y||T.top||0;return T}})();gF.ui.Suggestion.extend({posable:true,fixWidth:true,getWindowResizeHandler:function(){var e=this;return function(){e.adjustPosition(true)}},adjustPosition:function(T){var hJ=this;var hK=hJ.getTarget();var i=hJ.baseDom;var hI;var e=hJ.getMain();var hL;if(!hJ._isShowing()&&T){return}if(i){hK=i}hI=gF.dom.getPosition(hK);hL={top:(hI.top+hK.offsetHeight-1),left:hI.left,width:hK.offsetWidth};hL=typeof hJ.view=="function"?hJ.view(hL):hL;hJ.setPosition([hL.left,hL.top],null,{once:true});gF.dom.setOuterWidth(e,hL.width)}});gF.ui.Suggestion.register(function(e){e.windowResizeHandler=e.getWindowResizeHandler();e.addEventListener("onload",function(){e.adjustPosition();if(e.fixWidth){e.fixWidthTimer=setInterval(function(){var i=e.getMain(),T=e.getTarget();if(i.offsetWidth!=0&&T&&T.offsetWidth!=i.offsetWidth){e.adjustPosition();i.style.display="block"}},100)}e.on(window,"resize",e.windowResizeHandler)});e.addEventListener("onshow",function(){e.adjustPosition()});e.addEventListener("ondispose",function(){clearInterval(e.fixWidthTimer)})});gF.ui.Suggestion.register(function(hJ){var hM;var T="";var hL;var hI;var i=false;var hK=false;function e(){setTimeout(function(){var hN=hJ.getTarget();hL=hN===null?"":hN.value},20)}hJ.addEventListener("onload",function(){hM=this.getTarget();e();hJ.on(window,"onload",e);hJ.targetKeydownHandler=hJ.getTargetKeydownHandler();hJ.on(hM,"keydown",hJ.targetKeydownHandler);hM.setAttribute("autocomplete","off");hJ.circleTimer=setInterval(function(){if(hK){return}if(C.G(hM)==null){hJ.dispose()}var hN=hM.value;if(hN==T&&hN!=""&&hN!=hL&&hN!=hI){if(hJ.requestTimer==0){hJ.requestTimer=setTimeout(function(){hJ.dispatchEvent("onneeddata",hN)},100)}}else{clearTimeout(hJ.requestTimer);hJ.requestTimer=0;if(hN==""&&T!=""){hI="";hJ.hide()}T=hN;if(hN!=hI){hJ.defaultIptValue=hN}if(hL!=hM.value){hL=""}}},10);hJ.on(hM,"beforedeactivate",hJ.beforedeactivateHandler)});hJ.addEventListener("onitemclick",function(){hK=false;hJ.defaultIptValue=T=hJ.getTargetValue()});hJ.addEventListener("onpick",function(hN){if(i){hM.blur()}hM.value=hI=hN.data.item.value;if(i){hM.focus()}});hJ.addEventListener("onmousedownitem",function(hN){i=true;hK=true;setTimeout(function(){hK=false;i=false},500)});hJ.addEventListener("ondispose",function(){clearInterval(hJ.circleTimer)})});gF.ui.Suggestion.extend({beforedeactivateHandler:function(){return function(){if(mousedownView){window.event.cancelBubble=true;window.event.returnValue=false}}},getTargetKeydownHandler:function(){var i=this;function e(T){if(!i._isShowing()){i.dispatchEvent("onneeddata",i.getTargetValue());return}var hJ=i.enableIndex,hI=i.currentIndex;if(hJ.length==0){return}if(T){switch(hI){case -1:hI=hJ.length-1;i.pick(hJ[hI]);i.highLight(hJ[hI]);break;case 0:hI=-1;i.pick(i.defaultIptValue);i.clearHighLight();break;default:hI--;i.pick(hJ[hI]);i.highLight(hJ[hI]);break}}else{switch(hI){case -1:hI=0;i.pick(hJ[hI]);i.highLight(hJ[hI]);break;case hJ.length-1:hI=-1;i.pick(i.defaultIptValue);i.clearHighLight();break;default:hI++;i.pick(hJ[hI]);i.highLight(hJ[hI]);break}}i.currentIndex=hI}return function(hJ){var T=false,hI;hJ=hJ||window.event;switch(hJ.keyCode){case 9:i.hide();break;case 27:i.hide();break;case 13:gF.event.stop(hJ);i.confirm(i.currentIndex==-1?i.getTarget().value:i.enableIndex[i.currentIndex],"keyboard");break;case 38:T=true;gF.event.stop(hJ);e(T);break;case 40:gF.event.stop(hJ);e(T);break;default:i.currentIndex=-1}}},defaultIptValue:""});C.undope=true;gT.IS_INCLUDE_STYLE=false;gT.STYLE_FILE_PATH=eV.apiHost+"/res/20/bmap_autocomplete.css";gT.TYPES_COLLECTION={ALL:"0",CITY:"1"};C.extend(gT.prototype,{_asyncSearch:function(){this._initialize()},_initialize:function(){this._exIndex=-1;this._json=null;this._typeIds=[];this._cityId=0;this._results=this._getAutocompleteResult();if(!!this._options.input){this._getStyles();this._renderSuggestion();this.setInputValue(this._inputValue)}var e=null;if(!!this._word){e={};e.method="search";e.arguments=[this._word]}this._getTypesId();this._getCityId(e)},_renderSuggestion:function(){var i=this;var e=new gF.ui.Suggestion({getData:function(T){i._sendAutocompleteRequest(T)},onhide:function(){i._exIndex=-1;if(i._suggestion.getTargetValue()===""){i._word="";i._results=i._getAutocompleteResult()}},onhighlight:function(T){if(!i._json){return}var hJ={},hI={};hI={index:T.data.index,value:i._json.items[T.data.index].value};hJ={index:i._exIndex,value:i._exIndex>=0?i._json.items[i._exIndex].value:{}};var hK=new a6("onhighlight");hK.fromitem=hK.fromitem=hJ;hK.toitem=hK.toitem=hI;i.dispatchEvent(hK);i._exIndex=T.data.index},onbeforepick:function(T){if(!i._json){return}if(typeof(T.data.index)==="number"){var hI=i._json.items[T.data.index].value;T.data.item.content=T.data.item.value=hI.province+hI.city+hI.district+hI.street+hI.business}},onconfirm:function(T){if(!i._json){return}var hI={};if(typeof(T.data.index)==="number"){hI={index:T.data.index,value:i._json.items[T.data.index].value};var hJ=new a6("onconfirm");hJ.item=hJ.item=hI;i.dispatchEvent(hJ)}}});e.render(C.G(this._options.input),C.G(this._options.baseDom));this._suggestion=e},show:function(){if(this._suggestion){this._suggestion.getMain().style.display="block"}},hide:function(){this._suggestion&&this._suggestion.hide();this._exIndex=-1},dispose:function(){this._suggestion&&this._suggestion.dispose();gF.lang.Class.prototype.dispose.call(this)},setTypes:function(e){this._options.types=e||[];this._getTypesId()},setLocation:function(e,i){this._loc.src=e;this._getCityId(i)},search:function(e){this._sendAutocompleteRequest(e)},setInputValue:function(e){if(this._suggestion){this._suggestion.pick(e)}},_sendAutocompleteRequest:function(hI){var T=this,e=(Math.random()*100000).toFixed(0);BMapGL._rd["_cbk"+e]=function(hJ){if(C.G(T._options.input)!==null){T._getAutocompleteBack(hJ)}delete BMapGL._rd["_cbk"+e]};var i=eV.mapHost+"/su?wd="+encodeURIComponent(hI)+"&callback=BMapGL._rd._cbk"+e+"&cid="+T._cityId+"&type="+T._typeIds+"&t="+new Date().getTime()+"&from=jsapi";T._word=hI;T._exIndex=-1;T._results=this._getAutocompleteResult();D.request(i)},_getAutocompleteBack:function(e){if(e&&e.q){this._word=e.q}var i=this._formatDataForTangram(e);this._showResultList(i);this._results=this._getAutocompleteResult(this._json);this._options.onSearchComplete(this._results)},_formatDataForTangram:function(hK){var hL=[],T=hK.s,e={};e.keyword=hK.q||"";e.count=hK.s["length"]||0;e.status=hK.e<0?BMAP_STATUS_SERVICE_UNAVAILABLE:BMAP_STATUS_SUCCESS;e.items=[];var hJ=0;var hM=T.length;if(fW()&&hM>6){hM=6}for(;hJ<hM;hJ++){var hI=this._getItemValue(T[hJ],this._typeIds);e.items.push(hI.value);hL.push(hI.html)}this._json=e;return{data:hL,word:hK.q}},_showResultList:function(e){if(!this._suggestion){return}var i=this._suggestion;i.show(e.word,e.data);if(e.data["length"]<1){i.hide()}},_getItemValue:function(i,e){switch(e.toString()){case"1":return this._getItemValueForCity(i);default:return this._getItemValueForPoi(i)}},_getItemValueForPoi:function(hQ){var hP=hQ.split("$"),hJ=this._word,e=new RegExp(hJ,"g"),hI="<b>"+hJ+"</b>",hO={province:"",city:hP[0],district:hP[1],street:hP[2],streetNumber:"",business:hP[3]},hL="",T=3;if(hP.length>=7){hO.city=hP[5]||hO.city;hO.district=hP[6]||hO.city;hP[0]=hP[5];hP[1]=hP[6]}for(var hN=T;hN>=0;hN--){hL=hP[hN]+hL;if(hL.indexOf(hJ)>-1){var hM=hN-1,hK="";while(hM>-1){hK=hP[hM]+hK;hM--}hL=hL.replace(e,hI);if(!!hK){hL+="&nbsp;<span class=\'tangram-suggestion-grey\'>"+hK+"</span>"}break}else{continue}}if(!hK){for(var hN=T;hN>=0;hN--){hK+=hP[hN]}}return{value:{value:hO},html:hL}},_getItemValueForCity:function(hL){var i=hL.split("$"),hJ=this._word,e=new RegExp(hJ,"g"),T="<b>"+hJ+"</b>",hI={province:i[0],city:i[1],district:"",street:"",streetNumber:"",business:""},hK=(i[0]+i[1]).replace(e,T);return{value:{value:hI},html:hK}},_getTypesId:function(){var T=this._options.types,hI=[];if(gF.isString(T)){hI.push(gT.TYPES_COLLECTION[T.toUpperCase()])}else{if(gF.lang.isArray(T)){for(var e=0,hJ=T.length;e<hJ;e++){hI.push(gT.TYPES_COLLECTION[T[e].toUpperCase()])}}}this._typeIds=hI.length>0?hI.join(","):"0"},_getCityId:function(i){var e=this;e._getIdByLoc(e._loc,function(T){e._cityId=T;if(!!i){e[i.method].apply(e,i.arguments)}})},_getStyles:function(){if(!gT.IS_INCLUDE_STYLE){var T=document,i=T.createElement("link");i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("href",gT.STYLE_FILE_PATH);var e=T.getElementsByTagName("head");if(e.length){e[0].appendChild(i)}else{T.documentElement.appendChild(i)}gT.IS_INCLUDE_STYLE=true}},_getAutocompleteResult:function(e){if(!e){return new aU({keyword:this._word,total:0,pois:[]})}var hI=[];for(var T=0,hJ=e.items.length;T<hJ;T++){hI.push(e.items[T].value)}return new aU({keyword:e.keyword,total:e.count,pois:hI})}});function aU(e){this["keyword"]=e.keyword||"";this._numPois=e.total||0;this._pois=e.pois&&e.pois.slice(0)||[]}gF.extend(aU.prototype,{getPoi:function(e){if(this._pois[e]){return this._pois[e]}},getNumPois:function(){return this._numPois},toString:function(){return"AutocompleteResult"}});');
